Blob Store
==

A simple abstraction over a generic repository of binary data with associated
metadata

# Purpose

I often have some service that deals with several binary data files (from users
or internally generated). Storing on the db is often infeasible, so I tend
to place them in a hierarchical structure on the file system keeping and index
on the db.
This library abstracts this process a bit offering a simple interface for 
putting and retrieving `Blob`s in a straightforward way.

# Usage

```
# build your store with different strategies for data storage and metadata storage
$store = new \BlobStore\DefaultBlobStorage($storage, $metadataRepo); 
$data = "...." # read some data from fs or from upload or the web...
$blob =  $store->put($data, ['foo' => 'bar']);
$blob->getId(); # you can now associate the generated id to your domain objects for later retrieve

# you can also retrieve blobs by metadata
$blobList = $store->findBy(['foo' => 'bar']);
```

# Features

Currently implemented:
 - `SimpleFileStorage`: stores files under a commond prefix, balancing directories 
   with a configurable `nestingLevel`. Filenames are autogenerated and associated
   inside metadata under a well known key.
 - `DBALMetadataRepo`: stores metadata in a single indexed sql table. Check [metadata_db.sql].

# Limitations

 - currently `findBy` loads all found metadata in memory, so it is useful only
   when filtering on small subsets of the whole repository (eg: all attachments
   associated to a specific domain object).

 - currently it is *insert only*. Neither updates nor deletes are implemented. 